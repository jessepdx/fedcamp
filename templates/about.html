{% extends "base.html" %}
{% block title %}About — RV Camping Finder{% endblock %}

{% block content %}
<h1>About RV Camping Finder</h1>

<article>
    <header><strong>Data Source</strong></header>
    <p>All campground data comes from the <a href="https://ridb.recreation.gov" target="_blank">Recreation Information Database (RIDB)</a>,
    the federal government's official database of recreation facilities on public lands.</p>
    <p>This includes campgrounds managed by the National Park Service (NPS), USDA Forest Service (FS),
    Bureau of Land Management (BLM), US Army Corps of Engineers (USACE), Bureau of Reclamation (BOR),
    and US Fish & Wildlife Service (FWS).</p>
</article>

<article>
    <header><strong>Condition Indicators</strong></header>
    <p>Instead of a single score, each facility shows practical condition indicators that help you decide if it's right for your trip:</p>

    <h4>Road Access</h4>
    <p>How you'll get there. Based on facility descriptions and campsite data.</p>
    <table>
        <tbody>
            <tr><td><strong style="color:#2d7d46">Paved</strong></td><td>Paved roads to the campground.</td></tr>
            <tr><td><strong style="color:#6c757d">Gravel</strong></td><td>Gravel access roads.</td></tr>
            <tr><td><strong style="color:#d4782f">Dirt</strong></td><td>Unpaved dirt roads.</td></tr>
            <tr><td><strong style="color:#c0392b">High Clearance</strong></td><td>High clearance vehicle recommended.</td></tr>
            <tr><td><strong style="color:#c0392b">4WD Required</strong></td><td>Four-wheel drive needed for access.</td></tr>
        </tbody>
    </table>

    <h4>Seasonal Status</h4>
    <p>When the campground is open. Parsed from facility descriptions.</p>
    <table>
        <tbody>
            <tr><td><strong style="color:#2d7d46">Open Year-Round</strong></td><td>No seasonal closures mentioned.</td></tr>
            <tr><td><strong style="color:#c49f17">Seasonal Closure</strong></td><td>Closes for part of the year.</td></tr>
            <tr><td><strong style="color:#d4782f">Winter Closure</strong></td><td>Specifically closed during winter months.</td></tr>
        </tbody>
    </table>

    <h4>Campfire Status</h4>
    <p>Whether campfires are allowed, based on descriptions and campsite-level data.</p>
    <table>
        <tbody>
            <tr><td><strong style="color:#2d7d46">Campfires Allowed</strong></td><td>Campfires permitted at sites.</td></tr>
            <tr><td><strong style="color:#c49f17">Restrictions</strong></td><td>Fire restrictions mentioned in description.</td></tr>
            <tr><td><strong style="color:#c0392b">No Campfires</strong></td><td>Campfires not permitted.</td></tr>
        </tbody>
    </table>

    <h4>Other Indicators</h4>
    <ul>
        <li><strong>Elevation</strong> &mdash; Campground elevation in feet, parsed from descriptions.</li>
        <li><strong>Max RV Length</strong> &mdash; Maximum RV/trailer length from campsite data, equipment records, or descriptions.</li>
        <li><strong>Boondock Accessibility</strong> &mdash; For dispersed/primitive sites: Easy, Moderate, or Rough access.</li>
    </ul>
</article>

<article>
    <header><strong>Search &amp; Filters</strong></header>
    <p>Find campgrounds two ways:</p>
    <ul>
        <li><strong>By State</strong> &mdash; Click a state on the <a href="/">home page map</a>, or use the <a href="/search-form">search form</a> to select a state.</li>
        <li><strong>Search Nearby</strong> &mdash; The home page automatically detects your location. Choose a radius and search for campgrounds near you.</li>
    </ul>
    <p>Refine results with filters (also available in the slide-out panel on the results page):</p>
    <ul>
        <li><strong>Camping Type</strong> &mdash; Developed campgrounds, primitive campgrounds, or dispersed/boondocking.</li>
        <li><strong>Road Access</strong> &mdash; Filter by road type: paved, gravel, dirt, high clearance, 4WD.</li>
        <li><strong>Season</strong> &mdash; Open year-round, seasonal closure, or winter closure.</li>
        <li><strong>Campfires</strong> &mdash; Campfires allowed, restrictions, or no campfires.</li>
        <li><strong>Agency</strong> &mdash; Filter by managing agency (FS, BLM, NPS, USACE, BOR, FWS).</li>
        <li><strong>Amenities</strong> &mdash; Require specific features: full hookups, electric, pull-through sites, dump station, etc.</li>
    </ul>
</article>

<article>
    <header><strong>Dispersed / Boondocking</strong></header>
    <p>Dispersed camping areas (mostly BLM and Forest Service land) do not have traditional campground infrastructure.
    These show a <strong>boondock accessibility</strong> rating:</p>
    <ul>
        <li><strong>Easy</strong> &mdash; Accessible by standard vehicle on paved or maintained roads.</li>
        <li><strong>Moderate</strong> &mdash; Some rough roads, standard vehicle possible with care.</li>
        <li><strong>Rough</strong> &mdash; High clearance or 4WD may be required.</li>
    </ul>
</article>

<article>
    <header><strong>JSON API</strong></header>
    <p>FedCamp has a free public API that returns JSON. You can use it from your own scripts,
    apps, or AI chatbots (ChatGPT custom GPTs, Claude projects, etc.).</p>

    <h4>Endpoints</h4>
    <table>
        <thead><tr><th>Endpoint</th><th>Description</th></tr></thead>
        <tbody>
            <tr><td><code>/api/search</code></td><td>Search campgrounds by state or coordinates</td></tr>
            <tr><td><code>/api/facility/&lt;id&gt;</code></td><td>Full detail for one campground</td></tr>
            <tr><td><code>/api/states</code></td><td>List all states with campground counts</td></tr>
        </tbody>
    </table>

    <h4>Search Parameters</h4>
    <table>
        <thead><tr><th>Param</th><th>Description</th></tr></thead>
        <tbody>
            <tr><td><code>state</code></td><td>2-letter state code (required unless using lat/lon)</td></tr>
            <tr><td><code>lat</code>, <code>lon</code></td><td>Coordinates to search near (required unless using state)</td></tr>
            <tr><td><code>radius</code></td><td>Search radius in miles (default 100)</td></tr>
            <tr><td><code>camping_type</code></td><td>DEVELOPED, PRIMITIVE, or DISPERSED (repeatable, default DEVELOPED)</td></tr>
            <tr><td><code>agency</code></td><td>FS, BLM, NPS, USACE, BOR, FWS (repeatable)</td></tr>
            <tr><td><code>road_access</code></td><td>PAVED, GRAVEL, DIRT, HIGH_CLEARANCE, 4WD_REQUIRED (repeatable)</td></tr>
            <tr><td><code>seasonal_status</code></td><td>OPEN_YEAR_ROUND, SEASONAL_CLOSURE, WINTER_CLOSURE (repeatable)</td></tr>
            <tr><td><code>fire_status</code></td><td>CAMPFIRES_ALLOWED, RESTRICTIONS, NO_CAMPFIRES (repeatable)</td></tr>
            <tr><td><code>rv_length</code></td><td>Minimum RV length in feet</td></tr>
            <tr><td><code>tag</code></td><td>Amenity tag: FULL_HOOKUPS, ELECTRIC_HOOKUP, 50_AMP, WATER_HOOKUP, PULL_THROUGH, BIG_RIG_FRIENDLY, PAVED_ACCESS, DUMP_STATION, POTABLE_WATER, RESERVABLE (repeatable)</td></tr>
            <tr><td><code>limit</code></td><td>Max results (default 25, max 100)</td></tr>
            <tr><td><code>offset</code></td><td>Pagination offset</td></tr>
        </tbody>
    </table>

    <h4>Examples</h4>
    <pre style="overflow-x:auto"><code>GET /api/states
GET /api/search?state=OR&amp;camping_type=DEVELOPED
GET /api/search?state=CO&amp;camping_type=DEVELOPED&amp;camping_type=PRIMITIVE&amp;tag=FULL_HOOKUPS&amp;rv_length=35
GET /api/search?lat=45.5&amp;lon=-122.6&amp;radius=50&amp;agency=FS&amp;agency=BLM
GET /api/facility/273354</code></pre>

    <h4>Using with AI Chatbots</h4>
    <p>You can connect this API to ChatGPT (custom GPTs), Claude, or any AI tool that supports HTTP actions.
    Point your chatbot at <code>https://fedcamp.cloudromeo.com/api/</code> and give it instructions like:</p>
    <blockquote>
        <p><em>Use the FedCamp API at fedcamp.cloudromeo.com to help users find federal campgrounds.
        Start by calling /api/states to see what's available, then use /api/search with the user's state or
        coordinates and any filters they mention. Use /api/facility/&lt;id&gt; to get full details
        when a user asks about a specific campground.</em></p>
    </blockquote>

    <h4>Rate Limit</h4>
    <p>The API is limited to <strong>60 requests per minute</strong> per IP address. If you exceed this, you'll get a
    <code>429</code> response with a <code>Retry-After</code> header.</p>

    <h4>Download the Database</h4>
    <p>Want the raw data? Download the full SQLite database and query it yourself.</p>
    <p>
        <a href="/api/download" role="button" class="outline">Download fedcamp.db (~72 MB)</a>
        <a href="/static/fedcamp-db-guide.md" role="button" class="outline secondary">Database Guide (.md)</a>
    </p>
</article>

<article>
    <header><strong>Limitations</strong></header>
    <ul>
        <li>Condition data is based on RIDB descriptions and campsite data only. Real conditions may differ.</li>
        <li>Seasonal closures and fire restrictions change year to year — always verify current status.</li>
        <li>About 20% of facilities lack coordinates and won't appear in proximity searches.</li>
        <li>Photos are sourced from RIDB and may not be current.</li>
        <li>Always check Recreation.gov or contact the managing agency before traveling.</li>
    </ul>
</article>

<article>
    <header><strong>Feedback</strong></header>
    <p>Found a bug, have a suggestion, or just want to say hi? Let us know.</p>
    <form id="feedback-form" onsubmit="return submitFeedback(event)">
        <label>Name <small>(optional)</small>
            <input type="text" name="name" placeholder="Your name">
        </label>
        <label>Email <small>(optional)</small>
            <input type="email" name="email" placeholder="you@example.com">
        </label>
        <label>Message
            <textarea name="message" rows="4" placeholder="Your feedback..." required></textarea>
        </label>
        <button type="submit" id="feedback-btn">Send Feedback</button>
    </form>
    <p id="feedback-status" style="display:none"></p>
</article>
{% endblock %}

{% block scripts %}
<script>
function submitFeedback(e) {
    e.preventDefault();
    var form = document.getElementById('feedback-form');
    var btn = document.getElementById('feedback-btn');
    var status = document.getElementById('feedback-status');
    var data = {
        name: form.name.value.trim(),
        email: form.email.value.trim(),
        message: form.message.value.trim()
    };
    if (!data.message) return false;
    btn.setAttribute('aria-busy', 'true');
    btn.disabled = true;
    fetch('https://script.google.com/macros/s/AKfycbwj3tRGr3Cbb_maufxfouD5yZI34esRvJBAQy1fv-VnyCKQ0sbZtN06FozU2JUUcmQS/exec', {
        method: 'POST',
        body: JSON.stringify(data)
    }).then(function() {
        form.style.display = 'none';
        status.style.display = '';
        status.textContent = 'Thanks for your feedback!';
        status.style.color = '#2d7d46';
    }).catch(function() {
        btn.setAttribute('aria-busy', 'false');
        btn.disabled = false;
        status.style.display = '';
        status.textContent = 'Something went wrong. Please try again.';
        status.style.color = '#c0392b';
    });
    return false;
}
</script>
{% endblock %}
